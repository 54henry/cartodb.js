<!DOCTYPE html>
<html>
  <head>
    <title>Easy example | CartoDB.js</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
    <link rel="stylesheet" href="../../dist/themes/css/cartodb.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <style>
      html, body, #map {
        height: 100%;
        padding: 0;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>

    <!-- include cartodb.js library -->
    <script src="../../dist/cartodb.uncompressed.js"></script>

    <script>
      function main() {
      	var vizjson = {
          "id":"2b13c956-e7c1-11e2-806b-5404a6a683d5",
          "version":"0.1.0",
          "title":"european_countries_e 0",
          "likes":0,
          "description":null,
          "scrollwheel":true,
          "legends":true,
          "url":null,
          "map_provider":"leaflet",
          "bounds":[
            [
              -18.979025953255253,
              -155.7421875
            ],
            [
              80.58972691308571,
              261.2109375
            ]
          ],
          "center":"[52.5897007687178, 52.734375]",
          "zoom":2,
          "updated_at":"2015-03-13T11:24:37+00:00",
          "datasource": {
            "user_name": "cdb",
            "maps_api_template": "http://{user}.localhost.lan:8181",
            "stat_tag": "84ec6844-4b4b-11e5-9c1d-080027880ca6"
          },
          "layers":[
            {
              "options":{
                "id":"0a3d9104-99c6-482b-9f8c-7c6134bddcdc",
                "order":0,
                "visible":true,
                "type":"Tiled",
                "name":"Positron",
                "className":"default positron_rainbow",
                "base_type":"positron_rainbow",
                "urlTemplate":"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",
                "read_only":true,
                "minZoom":"0",
                "maxZoom":"18",
                "attribution":"&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors",
                "subdomains":"abcd",
                "category":"CartoDB"
              },
              "infowindow":null,
              "tooltip":null,
              "id":"0a3d9104-99c6-482b-9f8c-7c6134bddcdc",
              "order":0,
              "type":"tiled"
            },
            {
              "id":"923b7812-2d56-41c6-ac15-3ce430db090f",
              "type":"CartoDB",
              "infowindow":{
                "fields":[
                  {
                    "name":"pop2005",
                    "title":true,
                    "position":0
                  }
                ],
                "template_name":"table/views/infowindow_light",
                "template": " " +
                  '<div class="CDB-infowindow CDB-infowindow--custom js-infowindow" style="max-width: 200px;">' +
                    '<div class="CDB-infowindow-close js-close"></div>' +
                    '<div class="CDB-infowindow-container">' +
                      '<div class="CDB-infowindow-header CDB-infowindow-headerBg CDB-infowindow-headerBg--dark">' +
                        '<div class="CDB-infowindow-list">' +
                          '<div class="CDB-infowindow-listItem">' +
                            '<h4 class="CDB-infowindow-title">{{ name }}</h4>' +
                          '</div>' +
                        '</div>' +
                      '</div>' +
                      '<div class="CDB-hook CDB-hook--white">' +
                        '<div class="CDB-hook-inner">' +
                        '</div>' +
                      '</div>' +
                    '</div>' +
                  '</div>',
                "alternative_names":{},
                "width":226,
                "maxHeight":180
              },
              "tooltip":{
                "fields": [
                  {
                    "name": "name",
                    "title": true,
                    "position": 1
                  }
                ],
                "template_name":"tooltip_light",
                "template": ' '+
                    '<div class="CDB-Tooltip CDB-Tooltip--isDark js-content">'+
                      '<ul class="CDB-Tooltip-list">'+
                        '{{#fields}}'+
                        '<li class="CDB-Tooltip-listItem">'+
                          '<h3 class="CDB-Tooltip-listTitle">Name</h3>'+
                          '<h4 class="CDB-Tooltip-listText">{{value}}</h4>'+
                        '</li>'+
                        '{{/fields}}'+
                      '</ul>'+
                    '</div>',
                "alternative_names":{},
                "maxHeight":180
              },
              "legend":{
                "type":"choropleth",
                "show_title":false,
                "title":"",
                "template":"",
                "items":[
                  {
                    "name":"Left label",
                    "visible":true,
                    "value":"5592.00",
                    "type":"text"
                  },
                  {
                    "name":"Right label",
                    "visible":true,
                    "value":"1638094.00",
                    "type":"text"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FFFFB2",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FED976",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FEB24C",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FD8D3C",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FC4E2A",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#E31A1C",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#B10026",
                    "type":"color"
                  }
                ]
              },
              "order":1,
              "visible":true,
              "options":{
                "sql":"select * from world_borders",
                "layer_name":"world_borders",
                "cartocss":"/** choropleth visualization */\n\n#world_borders{\n  polygon-fill: ramp([pop2005], colorbrewer(Greens));\n  polygon-opacity: 0.8;\n  line-color: #FFF;\n  line-width: 1;\n  line-opacity: 0.5;\n}",
                "cartocss_version":"2.1.1",
                "interactivity":"cartodb_id",
                "table_name":"\"\"."
              },
              "legends": [
                { type: 'choropleth', title: 'Choropleth Legend', prefix: 'prefix', suffix: 'sufix' },
                {
                  type: 'custom', title: 'Custom legend', items: [
                    { type: 'color', name: 'Item 1', color: '#CACACA;'},
                    { type: 'color', name: 'Item 2', color: '#FABADA;'}
                  ]
                },
                {
                  type: 'html',
                  title: 'HTML Legend',
                  html: '<p class="CDB-Text CDB-Size-small u-mainTextColor u-upperCase">Some markup that gets sanitised<script>alert("hola");<\/script></p>'
                }
              ]

            },
            {
              "id":"923b7812-2d56-41c6-ac15-b090f3ce430d",
              "type":"CartoDB",
              "infowindow":{
                "fields":[
                  {
                    "name":"pop_max",
                    "title":true,
                    "position":0
                  }
                ],
                "template_name":"table/views/infowindow_light",
                "template": " " +
                  '<div class="CDB-infowindow CDB-infowindow--custom js-infowindow" style="max-width: 200px;">' +
                    '<div class="CDB-infowindow-close js-close"></div>' +
                    '<div class="CDB-infowindow-container">' +
                      '<div class="CDB-infowindow-header CDB-infowindow-headerBg CDB-infowindow-headerBg--dark">' +
                        '<div class="CDB-infowindow-list">' +
                          '<div class="CDB-infowindow-listItem">' +
                            '<h4 class="CDB-infowindow-title">{{ name }}</h4>' +
                          '</div>' +
                        '</div>' +
                      '</div>' +
                      '<div class="CDB-hook CDB-hook--white">' +
                        '<div class="CDB-hook-inner">' +
                        '</div>' +
                      '</div>' +
                    '</div>' +
                  '</div>',
                "alternative_names":{},
                "width":226,
                "maxHeight":180
              },
              "tooltip":{
                "fields": [
                  {
                    "name": "name",
                    "title": true,
                    "position": 1
                  }
                ],
                "template_name":"tooltip_light",
                "template": ' '+
                    '<div class="CDB-Tooltip CDB-Tooltip--isDark js-content">'+
                      '<ul class="CDB-Tooltip-list">'+
                        '{{#fields}}'+
                        '<li class="CDB-Tooltip-listItem">'+
                          '<h3 class="CDB-Tooltip-listTitle">Name</h3>'+
                          '<h4 class="CDB-Tooltip-listText">{{value}}</h4>'+
                        '</li>'+
                        '{{/fields}}'+
                      '</ul>'+
                    '</div>',
                "alternative_names":{},
                "maxHeight":180
              },
              "legend":{
                "type":"choropleth",
                "show_title":false,
                "title":"",
                "template":"",
                "items":[
                  {
                    "name":"Left label",
                    "visible":true,
                    "value":"5592.00",
                    "type":"text"
                  },
                  {
                    "name":"Right label",
                    "visible":true,
                    "value":"1638094.00",
                    "type":"text"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FFFFB2",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FED976",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FEB24C",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FD8D3C",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#FC4E2A",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#E31A1C",
                    "type":"color"
                  },
                  {
                    "name":"Color",
                    "visible":true,
                    "value":"#B10026",
                    "type":"color"
                  }
                ]
              },
              "order":2,
              "visible":true,
              "options":{
                "sql":"select * from ne_10m_populated_places_simple",
                "layer_name":"ne_10m_populated_places_simple",
                "cartocss":"#ne_10m_populated_places_simple{\n  marker-fill-opacity: 0.9;\n  marker-line-color: #FFF;\n  marker-line-width: 1;\n  marker-line-opacity: 1;\n  marker-placement: point;\n  marker-type: ellipse;\n  marker-width: ramp([pop_max], range(8, 32), jenks());\n  marker-fill: ramp([adm0name], cartocolor(Safe), category(8));\n  marker-allow-overlap: true;\n}",
                "cartocss_version":"2.1.1",
                "interactivity":"cartodb_id",
                "table_name":"\"\"."
              },
              "legends": [
                { type: 'bubble', title: 'Bubble Legend', pre_html_snippet: '<p>before</p>', post_html_snippet: '<p>after</p>', fill_color: '#FABADA' },
                { type: 'category', title: 'Categories Legend', prefix: 'prefix', sufix: 'sufix' }
              ]
            },
            {
              "options": {
                "visible": true,
                "type": "Tiled",
                "default": "true",
                "url": "http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png",
                "subdomains": "abcd",
                "minZoom": "0",
                "maxZoom": "18",
                "attribution": "&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors",
                "urlTemplate": "http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png",
                "name": "Positron Labels",
                "id": "bc054932-1ae8-4d4a-96d6-d49ce4247a59",
                "className": "httpsbasemapscartocdncomlight_only_labelszxypng",
                "order": 3
              },
              "infowindow": null,
              "tooltip": null,
              "id": "bc054932-1ae8-4d4a-96d6-d49ce4247a59",
              "order": 3,
              "type": "tiled"
            }
          ],
          "overlays":[
            {
              "type":"loader",
              "options":{
                "display":true,
                "x":20,
                "y":150
              }
            },
            {
              "type":"fullscreen",
              "options":{
                "x":20,
                "y":140,
                "display":true
              }
            },
            {
              "type":"search",
              "options":{
                "display":true
              }
            },
            {
              "type":"zoom",
              "options":{
                "x":20,
                "y":20,
                "display":true
              }
            }
          ],
          "prev":null,
          "next":null,
          "transition_options":{}
        };
        cartodb.createVis('map', vizjson, {})
        .done(function(vis, layers) {

          

        })
        .error(function(err) {
          console.log(err);
        });
      }

      window.onload = main;

    </script>
  </body>
</html>
